<!DOCTYPE html>
<html>
<head>
<title>Precision Hiring Engine</title>

<style>
body {
  background-color: #0f172a;
  color: #e2e8f0;
  font-family: system-ui;
  padding: 40px;
  max-width: 1200px;
  margin: auto;
}
h1 { color: #38bdf8; }
.card {
  background: #1e293b;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 25px;
}
select, input, textarea {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: none;
  background: #334155;
  color: white;
}
button {
  background: #38bdf8;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  cursor: pointer;
  margin-right: 10px;
  font-weight: 600;
}
button:hover { background: #0ea5e9; }
textarea { height: 170px; }
</style>
</head>

<body>

<h1>Precision Hiring Engine</h1>

<div class="card">
<label>Role Category</label>
<select id="category">
<option value="">-- Select Category --</option>
<option value="tech">Technology</option>
<option value="sales">Sales</option>
</select>

<label>Role</label>
<select id="role">
<option value="">-- Select Role --</option>
</select>

<label>Location</label>
<input id="location" placeholder="India / Bangalore / Hyderabad">

<label>Experience (Min)</label>
<input id="minExp">

<label>Experience (Max)</label>
<input id="maxExp">
</div>

<button onclick="generate()">Generate</button>

<div class="card">
<h3>Boolean Output</h3>
<textarea id="output"></textarea>
</div>

<script>

// =====================
// SKILL LIBRARY
// =====================

const skillLibrary = {
  sre: [
    { primary: "Kubernetes", synonyms: ["K8s"] },
    { primary: "AWS", synonyms: [] },
    { primary: "Terraform", synonyms: [] },
    { primary: "Docker", synonyms: [] }
  ],
  devops: [
    { primary: "CI/CD", synonyms: [] },
    { primary: "AWS", synonyms: [] },
    { primary: "Azure", synonyms: [] },
    { primary: "Terraform", synonyms: [] }
  ],
  se: [
    { primary: "Java", synonyms: [] },
    { primary: "Python", synonyms: [] },
    { primary: "Go", synonyms: [] },
    { primary: "Microservices", synonyms: [] }
  ],
  sdet: [
    { primary: "Selenium", synonyms: [] },
    { primary: "Cypress", synonyms: [] },
    { primary: "API Testing", synonyms: [] }
  ]
};

// =====================
// TECH ROLES (Now mapped to skill library)
// =====================

const techRoles = {
  sre: {
    label: "SRE",
    titles: '"SRE" OR "Site Reliability Engineer"',
    skillCategory: "sre"
  },
  devops: {
    label: "DevOps",
    titles: '"DevOps Engineer" OR "Platform Engineer"',
    skillCategory: "devops"
  },
  se: {
    label: "Software Engineer",
    titles: '"Software Engineer" OR "SE"',
    skillCategory: "se"
  },
  sdet: {
    label: "SDET",
    titles: '"SDET" OR "Automation Engineer"',
    skillCategory: "sdet"
  }
};

// =====================
// SALES ROLES (unchanged)
// =====================

const salesRoles = {
  enterprise: {
    label: "Enterprise Account Executive",
    titles: '"Enterprise Account Executive" OR "Major Account Manager"',
    skills: '"Enterprise Sales" OR "SaaS" OR "ARR" OR "Quota"'
  },
  security: {
    label: "Cloud / Security Sales",
    titles: '"Cloud Sales" OR "Cyber Security Sales"',
    skills: '"Cyber Security" OR "Cloud" OR "SaaS"'
  }
};

// =====================
// HELPERS
// =====================

function buildSkills(skillCategory) {
  const skills = skillLibrary[skillCategory];
  if (!skills) return "";

  let skillStrings = skills.map(skill => {
    if (skill.synonyms.length > 0) {
      return `("${skill.primary}" OR ${skill.synonyms.map(s => `"${s}"`).join(" OR ")})`;
    }
    return `"${skill.primary}"`;
  });

  return skillStrings.join(" OR ");
}

function populateRoles() {
  let category = document.getElementById("category").value;
  let roleSelect = document.getElementById("role");

  roleSelect.innerHTML = '<option value="">-- Select Role --</option>';

  let roles;

  if (category === "tech") {
    roles = techRoles;
  } else if (category === "sales") {
    roles = salesRoles;
  } else {
    return;
  }

  for (let key in roles) {
    let opt = document.createElement("option");
    opt.value = key;
    opt.text = roles[key].label;
    roleSelect.appendChild(opt);
  }
}

document.getElementById("category")
  .addEventListener("change", populateRoles);

function generate() {
  let category = document.getElementById("category").value;
  let roleKey = document.getElementById("role").value;

  if (!category || !roleKey) {
    alert("Select category and role");
    return;
  }

  let roles = category === "tech" ? techRoles : salesRoles;
  let roleData = roles[roleKey];

  let query;

  if (category === "tech") {
    let skillsBoolean = buildSkills(roleData.skillCategory);
    query = `(${roleData.titles}) AND (${skillsBoolean})`;
  } else {
    query = `(${roleData.titles}) AND (${roleData.skills})`;
  }

  document.getElementById("output").value = query;
}

</script>

</body>
</html>
